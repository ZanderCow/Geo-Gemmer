{% from "components/footer.html" import footer %}
{% from "components/signed-in-navbar.html" import signed_in_navbar %}
{% from "components/gem-searcher.html" import gem_searcher %}
<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Profile - Brand</title>
    <link rel="stylesheet" href="/static/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=ABeeZee&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alexandria&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=DM+Sans&amp;display=swap">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="/static/css/styles.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
</head>

<body id="page-top">
    {{ signed_in_navbar() }}
    
    <header data-aos="fade" id="greeting" class="bg-primary-gradient pt-5" style="background: #ffffff;">
        <div class="text-center">
            <p class="fw-bold text-success mb-2">Gem Search</p>
            <h3 class="fw-bold">Searching For {{user_query}}</h3>
        </div>
    </header>
    <form method="get">
        <nav class="navbar navbar-expand-md py-3" id="filter-bar-2">
            <div class="container-fluid">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item dropdown">
                        <a class="dropdown-toggle nav-link text-center" aria-expanded="false" data-bs-toggle="dropdown" href="#" style="padding-right: 40px;padding-left: 40px;">Type</a>
                        <div class="dropdown-menu">
                            <label class="dropdown-item">
                                <input type="checkbox" name="type" value="hiking_trail"> Hiking Trail
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" name="type" value="restaurant"> Restaurant
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" name="type" value="gym"> Gym
                            </label>
                            <!-- Add more options as needed -->
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="dropdown-toggle nav-link text-center" aria-expanded="false" data-bs-toggle="dropdown" href="#" style="padding-right: 40px;padding-left: 40px;">Accessibility</a>
                        <div class="dropdown-menu">
                            <label class="dropdown-item">
                                <input type="checkbox" name="accessibility" value="elderly_friendly"> Elderly Friendly
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" name="accessibility" value="autistic_friendly"> Autistic Friendly
                            </label>
                            <label class="dropdown-item">
                                <input type="checkbox" name="accessibility" value="kid_friendly"> Kid Friendly
                            </label>
                            <!-- Add more options as needed -->
                        </div>
                    </li>
                    <!-- Add more filter sections (Distance, Reviews) with checkboxes in a similar way -->
                   <button type="submit" class="btn btn-primary" style="color: rgb(255, 255, 255);">Apply Filters</button> 
                </ul>
            </div>
        </nav>
    </form>
    <div class="container scstyle-1 sc-overflow" data-aos="fade" id="gem-search">
        <div class="row gy-4 row-cols-1 row-cols-md-2 row-cols-xl-3 d-md-flex d-lg-flex justify-content-md-center">
            {{ gem_searcher(gem_data) }}
            <div class="col flex-fill">
                <div class="card shadow-sm">
                    <div class="card-body px-4 py-5 px-md-5">
                        <h5 class="fw-bold d-xxl-flex justify-content-xxl-center card-title" style="padding-bottom: 15px;">Map</h5><iframe allowfullscreen="" frameborder="0" src="https://cdn.bootstrapstudio.io/placeholders/map.html" width="100%" height="400" style="height: 550px;"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{ footer() }}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        function sendLocationToServer(latitude, longitude) {
            fetch('/gem/send-location', {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify({
                latitude: latitude,
                longitude: longitude,
              }),
            })
            .then(response => response.json())
            .then(data => console.log('Success:', data))
            .catch((error) => console.error('Error:', error));
          }
          
          if ("geolocation" in navigator) {
            navigator.geolocation.getCurrentPosition(function(position) {
              sendLocationToServer(position.coords.latitude, position.coords.longitude);
            });
          } else {
            console.log("Geolocation is not supported by your browser");
          }          
    </script>
    <script src="/static/js/script.min.js"></script>
</body>

</html>